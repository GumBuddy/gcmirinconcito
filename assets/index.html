<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GCMiRinconcito - Granja Cunícola Premium</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
<script>
tailwind.config = {
theme: {
extend: {
colors: {
'primary': '#1A2A4C', // Azul Marino Profundo
'accent': '#D4AF37', // Dorado Suave
'light': '#F1F5F9', // Gris Claro
'dark-text': '#1E293B', // Texto Oscuro
'medium-text': '#475569', // Texto Medio
},
fontFamily: {
'serif': ['Playfair Display', 'serif'],
}
}
}
}
</script>
<style>
body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
.nav-link.active { color: #D4AF37; font-weight: 700; }
.page-content { display: none; }
.page-content.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.page-content.active { animation: fadeIn 0.6s ease-in-out; }
.card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
.card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); }
.animate-on-scroll { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
.animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }
.accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
.accordion-content.active { max-height: 1000px; transition: max-height 0.5s ease-in; }
.parallax { background-attachment: fixed; background-position: center; background-repeat: no-repeat; background-size: cover; }
.float-button { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background-color: #D4AF37; color: #1A2A4C; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); cursor: pointer; transition: all 0.3s ease; z-index: 100; opacity: 0; visibility: hidden; }
.float-button.visible { opacity: 1; visibility: visible; }
.float-button:hover { transform: scale(1.1); background-color: #e5c548; }
.filter-btn { transition: all 0.3s ease; }
.filter-btn.active { background-color: #1A2A4C; color: white; }
.breed-card { transition: all 0.3s ease; cursor: pointer; }
.breed-card:hover { transform: translateY(-10px); }
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); animation: fadeIn 0.3s; }
.modal-content { background-color: white; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto; animation: slideIn 0.3s; }
@keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.close-modal { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
.close-modal:hover { color: #000; }
.carousel-container { position: relative; overflow: hidden; border-radius: 8px; margin-bottom: 20px; }
.carousel-track { display: flex; transition: transform 0.5s ease; }
.carousel-slide { min-width: 100%; height: 300px; background-size: cover; background-position: center; }
.carousel-nav { position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(0,0,0,0.5); color: white; border: none; padding: 10px 15px; cursor: pointer; font-size: 18px; border-radius: 50%; z-index: 10; transition: background-color 0.3s; }
.carousel-nav:hover { background-color: rgba(0,0,0,0.8); }
.carousel-prev { left: 10px; }
.carousel-next { right: 10px; }
.carousel-indicators { display: flex; justify-content: center; margin-top: 10px; gap: 8px; }
.indicator { width: 12px; height: 12px; border-radius: 50%; background-color: #ccc; cursor: pointer; transition: background-color 0.3s; }
.indicator.active { background-color: #D4AF37; }

/* Estilos del Chatbot */
.chat-bubble { position: fixed; bottom: 90px; right: 20px; width: 60px; height: 60px; background-color: #1A2A4C; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); cursor: pointer; transition: all 0.3s ease; z-index: 100; animation: pulse 2s infinite;}
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(26, 42, 76, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(26, 42, 76, 0); } 100% { box-shadow: 0 0 0 0 rgba(26, 42, 76, 0); } }
.chat-bubble:hover { transform: scale(1.1); background-color: #2c3e6b; }
@keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
.chat-bubble.new-message { animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both, pulse 2s infinite; }
.chat-widget { position: fixed; bottom: 160px; right: 20px; width: 90%; max-width: 400px; height: 70%; max-height: 500px; background-color: white; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); z-index: 99; display: flex; flex-direction: column; transition: all 0.4s ease-in-out; transform: translateY(20px) scale(0.95); opacity: 0; visibility: hidden; }
.chat-widget.visible { transform: translateY(0) scale(1); opacity: 1; visibility: visible; }
.chat-header { background-color: #1A2A4C; color: white; padding: 15px; border-top-left-radius: 15px; border-top-right-radius: 15px; display: flex; justify-content: space-between; align-items: center; }
.chat-messages { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
.message { padding: 10px 15px; border-radius: 18px; max-width: 80%; line-height: 1.5; animation: fadeInMessage 0.3s ease; }
@keyframes fadeInMessage { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.message.user { background-color: #D4AF37; color: #1A2A4C; align-self: flex-end; border-bottom-right-radius: 4px; }
.message.bot { background-color: #F1F5F9; color: #1E293B; align-self: flex-start; border-bottom-left-radius: 4px; }
.message.bot ul { list-style: none; padding-left: 5px; margin-top: 8px; }
.message.bot li { padding-left: 0; margin-bottom: 5px; display: flex; align-items: center; }
.chat-input { border-top: 1px solid #e2e8f0; padding: 15px; display: flex; gap: 10px; }
.chat-input input { flex-grow: 1; border: 1px solid #cbd5e1; border-radius: 20px; padding: 10px 15px; outline: none; transition: border-color 0.2s; }
.chat-input input:focus { border-color: #D4AF37; }
.chat-input button { background-color: #1A2A4C; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background-color 0.2s; }
.chat-input button:hover { background-color: #2c3e6b; }
.typing-indicator { align-self: flex-start; color: #94a3b8; font-style: italic; display: flex; align-items: center; padding: 10px 15px; background-color: #F1F5F9; border-radius: 18px; border-bottom-left-radius: 4px; max-width: 80%; }
.typing-indicator span { height: 8px; width: 8px; background-color: #94a3b8; border-radius: 50%; display: inline-block; margin: 0 2px; animation: typing 1.4s infinite; }
.typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typing { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-6px); } }
.rating-container { text-align: center; padding: 15px; background-color: #f8fafc; border-radius: 10px; margin-top: 10px; animation: fadeIn 0.5s ease; }
.rating-container h4 { margin-bottom: 10px; color: #1A2A4C; font-weight: 600; }
.stars { display: flex; justify-content: center; gap: 5px; margin-bottom: 10px; }
.star { font-size: 24px; color: #ddd; cursor: pointer; transition: all 0.2s ease; }
.star:hover, .star.active { color: #D4AF37; transform: scale(1.2); }
.feedback-btn, .reconnect-btn { background-color: #1A2A4C; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; transition: background-color 0.2s; font-weight: 500; }
.feedback-btn:hover, .reconnect-btn:hover { background-color: #2c3e6b; }
.feedback-message { text-align: center; padding: 10px; border-radius: 8px; margin-top: 10px; font-weight: 500; animation: fadeIn 0.5s ease; }
.feedback-success { background-color: #d1fae5; color: #065f46; }
.whatsapp-handoff { display: inline-block; background-color: #25D366; color: white; padding: 12px 20px; border-radius: 25px; text-decoration: none; font-weight: bold; transition: transform 0.2s; }
.whatsapp-handoff:hover { transform: scale(1.05); }
.complaint-link { display: inline-block; background-color: #ef4444; color: white; padding: 12px 20px; border-radius: 25px; text-decoration: none; font-weight: bold; transition: transform 0.2s; }
.complaint-link:hover { transform: scale(1.05); background-color: #dc2626; }
.loader-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; gap: 15px; color: #475569; }
.spinner { width: 48px; height: 48px; border: 5px solid #F1F5F9; border-bottom-color: #1A2A4C; border-radius: 50%; display: inline-block; box-sizing: border-box; animation: rotation 1s linear infinite; }
@keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>
</head>
<body class="text-dark-text">

<div class="bg-primary text-white p-3 text-center shadow-lg sticky top-0 z-40">
<a id="whatsapp-banner" href="#" target="_blank" class="flex items-center justify-center space-x-4 group">
<span class="font-semibold text-lg">¿Buscando una mascota premium? →</span>
<span class="bg-accent text-primary font-bold py-2 px-5 rounded-full group-hover:bg-yellow-300 transition-all duration-300 transform group-hover:scale-105 flex items-center">
<i class="fab fa-whatsapp mr-2"></i> Contactar por WhatsApp
</span>
</a>
</div>

<header class="bg-white/90 backdrop-blur-lg shadow-sm sticky top-12 z-30">
<nav class="container mx-auto px-6 py-4 flex justify-between items-center">
<a href="#" class="flex items-center space-x-3 nav-link" data-target="inicio">
<div class="w-12 h-12 bg-accent rounded-full flex items-center justify-center text-primary font-bold text-lg border-2 border-yellow-500/50 animate-pulse">GC</div>
<span class="text-2xl font-bold text-primary font-serif">GCMiRinconcito</span>
</a>
<div class="hidden md:flex items-center space-x-8">
<a href="#" class="nav-link text-medium-text hover:text-accent transition-colors duration-300 active flex items-center" data-target="inicio"><i class="fas fa-home mr-2"></i>Inicio</a>
<a href="#" class="nav-link text-medium-text hover:text-accent transition-colors duration-300 flex items-center" data-target="razas"><i class="fas fa-paw mr-2"></i>Razas</a>
<a href="#" class="nav-link text-medium-text hover:text-accent transition-colors duration-300 flex items-center" data-target="servicios"><i class="fas fa-box mr-2"></i>Servicios</a>
<a href="#" class="nav-link text-medium-text hover:text-accent transition-colors duration-300 flex items-center" data-target="fidelidad"><i class="fas fa-crown mr-2"></i>Club Premium</a>
<a href="#" class="nav-link text-medium-text hover:text-accent transition-colors duration-300 flex items-center" data-target="politicas"><i class="fas fa-file-contract mr-2"></i>Políticas</a>
</div>
<div class="md:hidden"><button id="mobile-menu-button" class="text-primary focus:outline-none"><svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></button></div>
</nav>
<div id="mobile-menu" class="hidden md:hidden bg-white border-t">
<a href="#" class="block nav-link py-3 px-6 text-medium-text hover:bg-light flex items-center" data-target="inicio"><i class="fas fa-home mr-2"></i>Inicio</a>
<a href="#" class="block nav-link py-3 px-6 text-medium-text hover:bg-light flex items-center" data-target="razas"><i class="fas fa-paw mr-2"></i>Razas</a>
<a href="#" class="block nav-link py-3 px-6 text-medium-text hover:bg-light flex items-center" data-target="servicios"><i class="fas fa-box mr-2"></i>Servicios</a>
<a href="#" class="block nav-link py-3 px-6 text-medium-text hover:bg-light flex items-center" data-target="fidelidad"><i class="fas fa-crown mr-2"></i>Club Premium</a>
<a href="#" class="block nav-link py-3 px-6 text-medium-text hover:bg-light flex items-center" data-target="politicas"><i class="fas fa-file-contract mr-2"></i>Políticas</a>
</div>
</header>

<div id="back-to-top" class="float-button"><i class="fas fa-arrow-up"></i></div>

<div id="chat-bubble" class="chat-bubble"><i class="fas fa-comments"></i></div>

<div id="chat-widget" class="chat-widget">
<div class="chat-header">
<div>
<h3 class="font-bold">Agente Comercial</h3>
<span id="agent-name" class="text-sm text-gray-300">Conectando...</span>
</div>
<button id="close-chat" class="text-xl">&times;</button>
</div>
<div id="chat-messages" class="chat-messages"></div>
<div class="chat-input">
<input type="text" id="chat-input-field" placeholder="Escribe tu pregunta...">
<button id="chat-send-btn"><i class="fas fa-paper-plane"></i></button>
</div>
</div>

<main class="container mx-auto px-6 py-8 md:py-16">
<section id="inicio" class="page-content active">
<div class="bg-cover bg-center h-96 rounded-2xl shadow-2xl flex items-center justify-center text-center p-6 animate-on-scroll parallax" style="background-image: url('https://placehold.co/1200x500/1A2A4C/D4AF37?text=GCMiRinconcito&font=serif');">
<div class="bg-black bg-opacity-50 p-10 rounded-xl backdrop-blur-sm">
<h1 class="text-4xl md:text-6xl font-bold text-white font-serif">Granja Cunícola Mi Rinconcito</h1>
<p class="text-xl text-gray-200 mt-4">Criadores de ejemplares premium, comprometidos con el bienestar y la excelencia.</p>
</div>
</div>
<div class="mt-16 text-center animate-on-scroll">
<h2 class="text-4xl font-bold mb-4 text-primary font-serif">¡Bienvenidos a Nuestro Rincón!</h2>
<p class="text-lg text-medium-text max-w-3xl mx-auto">Somos una granja dedicada a la crianza responsable y al amor por los conejos. Aquí encontrarás ejemplares sanos, de excelente temperamento y criados en un ambiente óptimo. Explora nuestro sitio para conocer más sobre nuestras razas, productos y servicios.</p>
</div>
<div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
<div class="bg-white p-8 rounded-xl shadow-lg text-center card-hover animate-on-scroll border-t-4 border-accent"><div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-seedling text-2xl text-primary"></i></div><h3 class="text-2xl font-semibold mb-2 text-primary">Alimento de Élite</h3><p class="text-medium-text">Nutrición balanceada para cada etapa de vida de tu mascota.</p></div>
<div class="bg-white p-8 rounded-xl shadow-lg text-center card-hover animate-on-scroll border-t-4 border-accent" style="transition-delay: 150ms;"><div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-wheat-awn text-2xl text-primary"></i></div><h3 class="text-2xl font-semibold mb-2 text-primary">Heno Fresco Premium</h3><p class="text-medium-text">Esencial para su dieta y salud digestiva, siempre disponible.</p></div>
<div class="bg-white p-8 rounded-xl shadow-lg text-center card-hover animate-on-scroll border-t-4 border-accent" style="transition-delay: 300ms;"><div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-heart-pulse text-2xl text-primary"></i></div><h3 class="text-2xl font-semibold mb-2 text-primary">Cuidado Experto</h3><p class="text-medium-text">Servicios de salud y prevención para garantizar su bienestar.</p></div>
</div>
<div class="mt-16 bg-gradient-to-r from-primary to-blue-800 p-10 rounded-2xl shadow-xl text-center animate-on-scroll">
<h2 class="text-4xl font-bold mb-4 text-white font-serif">Conoce a Nuestros Ejemplares</h2>
<p class="text-lg text-gray-200 mb-6">Descubre las maravillosas razas que criamos con una dedicación inigualable.</p>
<a href="#" class="nav-link bg-accent text-primary font-bold py-4 px-10 rounded-full hover:bg-yellow-300 transition-all duration-300 transform hover:scale-105 inline-block" data-target="razas"><i class="fas fa-paw mr-2"></i>Ver Razas Disponibles</a>
</div>
</section>
<section id="razas" class="page-content">
<h1 class="text-4xl font-bold text-center mb-2 text-primary font-serif">Nuestras Razas Premium</h1>
<p class="text-lg text-medium-text text-center mb-12 max-w-3xl mx-auto">Cada ejemplar es un testimonio de nuestra dedicación a la pureza genética, la salud y un temperamento excepcional.</p>
<div class="flex flex-wrap justify-center gap-2 mb-10"><button class="filter-btn px-4 py-2 rounded-full bg-light text-medium-text hover:bg-primary hover:text-white" data-filter="all">Todas las Razas</button><button class="filter-btn px-4 py-2 rounded-full bg-light text-medium-text hover:bg-primary hover:text-white" data-filter="pequenas">Razas Pequeñas</button><button class="filter-btn px-4 py-2 rounded-full bg-light text-medium-text hover:bg-primary hover:text-white" data-filter="medianas">Razas Medianas</button><button class="filter-btn px-4 py-2 rounded-full bg-light text-medium-text hover:bg-primary hover:text-white" data-filter="grandes">Razas Grandes</button></div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 breed-gallery"></div>
</section>
<section id="servicios" class="page-content">
<h1 class="text-4xl font-bold text-center mb-2 text-primary font-serif">Nuestros Productos y Servicios</h1>
<p class="text-lg text-medium-text text-center mb-12 max-w-3xl mx-auto">Ofrecemos todo lo necesario para el bienestar de tu mascota, desde nutrición de alta calidad hasta cuidados especializados.</p>
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
<div class="bg-white p-8 rounded-xl shadow-lg card-hover animate-on-scroll border-l-4 border-accent"><div class="flex items-start"><div class="w-14 h-14 bg-accent rounded-full flex items-center justify-center mr-4 flex-shrink-0"><i class="fas fa-wheat-awn text-2xl text-primary"></i></div><div><h3 class="text-2xl font-semibold mb-4 text-primary">Alimento Balanceado a Granel</h3><p class="text-medium-text mb-4">Nutrición de alta calidad para el óptimo desarrollo de tu mascota.</p><div class="bg-light p-4 rounded-lg"><div class="text-lg"><span class="font-semibold">Precio por Kg:</span> $24</div><div class="text-lg"><span class="font-semibold">Precio por Kg (Premium):</span> $25 - $30</div></div></div></div></div>
<div class="bg-white p-8 rounded-xl shadow-lg card-hover animate-on-scroll border-l-4 border-accent" style="transition-delay: 150ms;"><div class="flex items-start"><div class="w-14 h-14 bg-accent rounded-full flex items-center justify-center mr-4 flex-shrink-0"><i class="fas fa-seedling text-2xl text-primary"></i></div><div><h3 class="text-2xl font-semibold mb-4 text-primary">Venta de Heno a Granel</h3><p class="text-medium-text mb-4">Heno fresco y de la mejor calidad, esencial en la dieta de conejos y cuyos.</p><div class="bg-light p-4 rounded-lg"><div class="text-lg"><span class="font-semibold">Heno de Alfalfa:</span> $85 / Kg</div><div class="text-lg"><span class="font-semibold">Heno de Avena:</span> $85 / Kg</div><div class="text-lg"><span class="font-semibold">Heno de Festuca:</span> $135 / Kg</div></div></div></div></div>
<div class="bg-white p-8 rounded-xl shadow-lg card-hover animate-on-scroll border-l-4 border-accent"><div class="flex items-start"><div class="w-14 h-14 bg-accent rounded-full flex items-center justify-center mr-4 flex-shrink-0"><i class="fas fa-shield-virus text-2xl text-primary"></i></div><div><h3 class="text-2xl font-semibold mb-4 text-primary">Servicio de Desparasitación</h3><p class="text-medium-text mb-4">Protege la salud de tu conejo. Recomendamos aplicarlo cada 6 meses.</p><div class="text-3xl font-bold text-accent mt-4">$85 por ejemplar</div></div></div></div>
<div class="bg-white p-8 rounded-xl shadow-lg card-hover animate-on-scroll border-l-4 border-accent" style="transition-delay: 150ms;"><div class="flex items-start"><div class="w-14 h-14 bg-accent rounded-full flex items-center justify-center mr-4 flex-shrink-0"><i class="fas fa-stethoscope text-2xl text-primary"></i></div><div><h3 class="text-2xl font-semibold mb-4 text-primary">Chequeo General de Salud</h3><p class="text-medium-text mb-4">Revisión completa por un cunicultor experto. Incluye revisión dental, peso, uñas y asesoría.</p><div class="text-3xl font-bold text-accent mt-4">$120 por ejemplar</div></div></div></div>
</div>
<div class="mt-16 bg-gradient-to-r from-primary to-blue-800 p-10 rounded-2xl shadow-xl text-center animate-on-scroll"><h2 class="text-3xl font-bold mb-4 text-white font-serif">¿Necesitas asesoría personalizada?</h2><p class="text-lg text-gray-200 mb-6">Nuestros expertos están listos para ayudarte a elegir lo mejor para tu mascota.</p><a id="whatsapp-services" href="#" target="_blank" class="bg-accent text-primary font-bold py-3 px-8 rounded-full hover:bg-yellow-300 transition-all duration-300 transform hover:scale-105 inline-block"><i class="fab fa-whatsapp mr-2"></i>Consultar por WhatsApp</a></div>
</section>
<section id="fidelidad" class="page-content">
<div class="bg-white p-10 rounded-2xl shadow-xl"><div class="text-center"><h1 class="text-4xl font-bold text-primary mb-2 font-serif">Club Premium GCMiRinconcito</h1><p class="text-2xl font-semibold text-accent">Recompensamos tu lealtad.</p></div><div class="mt-8 bg-gradient-to-r from-primary to-blue-800 text-white p-8 rounded-xl text-center animate-on-scroll shadow-lg"><h2 class="text-3xl font-bold text-accent">Acumula el 6% del total de tu compra en puntos.</h2></div><div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-10 items-center"><div class="animate-on-scroll"><h3 class="text-3xl font-semibold mb-4 text-primary">¿Cómo funciona?</h3><ul class="space-y-4 text-medium-text text-lg"><li class="flex items-start"><i class="fas fa-check-circle text-accent mt-1 mr-3"></i><span><strong class="text-dark-text">Registro:</strong> Es gratuito y se solicita al realizar una compra.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-accent mt-1 mr-3"></i><span><strong class="text-dark-text">Acumulación:</strong> Ganas puntos al comprar alimentos, heno, suplementos y más.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-accent mt-1 mr-3"></i><span><strong class="text-dark-text">Exclusiones:</strong> No aplica en servicios veterinarios o compra de ejemplares.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-accent mt-1 mr-3"></i><span><strong class="text-dark-text">Vigencia:</strong> Tus puntos vencen tras 95 días de inactividad.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-accent mt-1 mr-3"></i><span><strong class="text-dark-text">Consulta:</strong> Puedes ver tu saldo de puntos en tu ticket de compra.</span></li></ul></div><div class="animate-on-scroll" style="transition-delay: 150ms;"><img src="https://placehold.co/500x350/D4AF37/1A2A4C?text=Tus+compras+te+premian&font=serif" alt="Recompensas" class="rounded-lg shadow-xl"></div></div><div class="mt-16 animate-on-scroll"><h3 class="text-3xl font-bold text-center mb-6 text-primary font-serif">Catálogo de Recompensas</h3><div class="overflow-x-auto"><table class="w-full text-left bg-light rounded-lg shadow-md"><thead class="bg-gray-200"><tr><th class="p-4 font-semibold text-primary">Puntos</th><th class="p-4 font-semibold text-primary">Recompensa</th></tr></thead><tbody><tr class="border-b border-gray-200 hover:bg-gray-100"><td class="p-4 font-semibold text-accent">30 puntos</td><td class="p-4">1 Kg de Alimento</td></tr><tr class="border-b border-gray-200 hover:bg-gray-100"><td class="p-4 font-semibold text-accent">50 puntos</td><td class="p-4">1 Juego de Bebedero de Niple o 1/2 Kg de Sustrato</td></tr><tr class="border-b border-gray-200 hover:bg-gray-100"><td class="p-4 font-semibold text-accent">60 puntos</td><td class="p-4">Servicio a Domicilio</td></tr><tr class="border-b border-gray-200 hover:bg-gray-100"><td class="p-4 font-semibold text-accent">100 puntos</td><td class="p-4">1 Kg de Heno (Avena/Alfalfa) o Servicio de Desparasitación o 3.8 Kg de Alimento</td></tr><tr class="hover:bg-gray-100"><td class="p-4 font-semibold text-accent">150 puntos</td><td class="p-4">1 Kg de Heno (Festuca)</td></tr></tbody></table></div></div><div class="mt-16 text-center animate-on-scroll"><h3 class="text-2xl font-bold mb-4 text-primary">¿Listo para unirte al club?</h3><p class="text-medium-text mb-6 max-w-2xl mx-auto">Regístrate en tu próxima compra y comienza a disfrutar de los beneficios exclusivos de nuestro programa de lealtad.</p><a id="whatsapp-club" href="#" target="_blank" class="bg-accent text-primary font-bold py-3 px-8 rounded-full hover:bg-yellow-300 transition-all duration-300 transform hover:scale-105 inline-block"><i class="fab fa-whatsapp mr-2"></i>Registrarme Ahora</a></div></div>
</section>
<section id="politicas" class="page-content">
<div class="bg-white p-10 rounded-2xl shadow-xl">
<h1 class="text-4xl font-bold text-center mb-10 text-primary font-serif">Políticas de Servicio y Garantías</h1>
<div class="space-y-6">
<div class="border border-gray-200 rounded-lg overflow-hidden"><button class="accordion-header w-full text-left p-5 bg-light hover:bg-gray-100 flex justify-between items-center"><h2 class="text-2xl font-semibold text-primary">Política de Envíos y Entregas</h2><i class="fas fa-chevron-down text-accent transition-transform duration-300"></i></button><div class="accordion-content"><div class="p-5 text-medium-text"><ul class="list-disc list-inside space-y-3"><li><strong>Clientes Nuevos:</strong> Para el primer servicio a domicilio, se requiere el pago anticipado del costo de envío. El valor del producto se liquida al repartidor en el momento de la entrega.</li><li><strong>Clientes Frecuentes:</strong> Los clientes registrados podrán liquidar el costo total (producto + envío) al recibir su pedido.</li><li><strong>Envíos Nacionales (MercadoLibre):</strong> Las compras realizadas en esta plataforma se gestionan bajo sus términos y sistema de envíos. El pedido se despacha al siguiente día hábil de la compra.</li></ul></div></div></div>
<div class="border border-gray-200 rounded-lg overflow-hidden"><button class="accordion-header w-full text-left p-5 bg-light hover:bg-gray-100 flex justify-between items-center"><h2 class="text-2xl font-semibold text-primary">Política de Apartado y Preventa</h2><i class="fas fa-chevron-down text-accent transition-transform duration-300"></i></button><div class="accordion-content"><div class="p-5 text-medium-text"><ul class="list-disc list-inside space-y-3"><li><strong>Apartado Estándar (24 horas):</strong> Se puede reservar un ejemplar abonando el 50% de su valor. Esta reserva es válida por 24 horas. Si la compra no se concreta en este plazo, la reserva se cancela y el importe del apartado no es reembolsable.</li><li><strong>Apartado para Fecha Específica:</strong> Para reservar un ejemplar para una fecha futura, se aplica un cargo adicional de $50 por concepto de hospedaje y alimentación por cada 5 días. En caso de cancelación, el apartado inicial del 50% no es reembolsable. El cargo por hospedaje no será reembolsado si el periodo de 5 días ya ha comenzado.</li><li><strong>Apartado en Preventa:</strong> Una vez disponible el ejemplar, el cliente tiene 72 horas para recogerlo o coordinar su envío. Si no se concreta la compra en este plazo, se aplicará una penalización de $50 y se reembolsará el importe restante del abono inicial.</li><li><strong>Cancelación de Preventa:</strong> Se puede cancelar una preventa sin penalización hasta un día antes de la fecha oficial de disponibilidad.</li></ul></div></div></div>
<div class="border border-gray-200 rounded-lg overflow-hidden"><button class="accordion-header w-full text-left p-5 bg-light hover:bg-gray-100 flex justify-between items-center"><h2 class="text-2xl font-semibold text-primary">Proceso de Devolución de Importes</h2><i class="fas fa-chevron-down text-accent transition-transform duration-300"></i></button><div class="accordion-content"><div class="p-5 text-medium-text"><ul class="list-disc list-inside space-y-3"><li>Para solicitar un reembolso aplicable (según la política de preventa), el cliente debe presentar su ticket de compra en un plazo no mayor a 3 días hábiles desde la cancelación. Si no se solicita en este periodo, no procederá la devolución.</li><li>Todo reembolso aprobado se procesará en un lapso máximo de 72 horas hábiles.</li></ul></div></div></div>
<div class="border border-gray-200 rounded-lg overflow-hidden"><button class="accordion-header w-full text-left p-5 bg-light hover:bg-gray-100 flex justify-between items-center"><h2 class="text-2xl font-semibold text-primary">Garantía de Bienestar "GRAMIR" (Sustitución)</h2><i class="fas fa-chevron-down text-accent transition-transform duration-300"></i></button><div class="accordion-content"><div class="p-5 text-medium-text"><p class="mb-4">Esta garantía cubre el fallecimiento de un ejemplar dentro de las <strong>48 horas</strong> posteriores a su adquisición. Ofrece el cambio por un ejemplar de la misma raza (o la siguiente disponible).</p><h4 class="font-semibold text-lg mb-2 text-primary">Condiciones para validación:</h4><ol class="list-decimal list-inside space-y-2 mb-4"><li>Presentar el ticket de compra original.</li><li>Presentar el cuerpo del ejemplar para la realización de una necropsia interna (sin costo para el cliente).</li><li>Proporcionar el código de informe generado al reportar el caso.</li></ol><h4 class="font-semibold text-lg mb-2 text-primary">Aplicabilidad:</h4><p class="mb-4">La garantía será válida únicamente si la necropsia interna determina que la causa de muerte fue una enfermedad o condición congénita adquirida en nuestras instalaciones.</p><h4 class="font-semibold text-lg mb-2 text-primary">Exclusiones:</h4><p>La garantía queda invalidada si la necropsia determina que la causa de muerte deriva de negligencia o factores externos posteriores a la compra, incluyendo pero no limitado a: maltrato, asfixia, traumatismos, deshidratación, golpe de calor, paro cardíaco, problemas digestivos agudos o intoxicación alimentaria.</p></div></div></div>
<div class="border border-gray-200 rounded-lg overflow-hidden"><button class="accordion-header w-full text-left p-5 bg-light hover:bg-gray-100 flex justify-between items-center"><h2 class="text-2xl font-semibold text-primary">Garantía de Reembolso Total (Condiciones Específicas)</h2><i class="fas fa-chevron-down text-accent transition-transform duration-300"></i></button><div class="accordion-content"><div class="p-5 text-medium-text"><p class="mb-4">Se realizará una devolución completa del dinero únicamente si se cumplen <strong>todas</strong> las siguientes condiciones:</p><ol class="list-decimal list-inside space-y-2 mb-4"><li>El fallecimiento es reportado en las primeras <strong>8 horas</strong> posteriores a la compra.</li><li>El cliente presenta el cuerpo del ejemplar, el ticket de compra y el código de informe.</li><li>El cliente presenta un certificado de necropsia expedido por un médico veterinario externo (especialista en exóticos, con cédula profesional vigente), cuyo dictamen confirme que la causa de muerte fue una enfermedad adquirida en nuestras instalaciones.</li></ol><div class="bg-red-100 border-l-4 border-red-500 text-red-800 p-4 rounded-md"><p class="font-semibold">Nota Importante:</p><p>Los honorarios del veterinario externo corren por cuenta exclusiva del cliente y no serán cubiertos por la empresa en ningún caso.</p></div></div></div></div>
<div class="border border-gray-200 rounded-lg overflow-hidden"><button class="accordion-header w-full text-left p-5 bg-light hover:bg-gray-100 flex justify-between items-center"><h2 class="text-2xl font-semibold text-primary">Cláusula General</h2><i class="fas fa-chevron-down text-accent transition-transform duration-300"></i></button><div class="accordion-content"><div class="p-5 text-medium-text"><p>Cualquier situación no especificada explícitamente en estas políticas queda excluida de nuestras garantías.</p></div></div></div>
</div>
</div>
</section>
</main>

<footer class="bg-primary text-white mt-16">
<div class="container mx-auto px-6 py-10">
<div class="flex flex-col md:flex-row justify-between items-center">
<a href="#" class="flex items-center space-x-3 mb-4 md:mb-0 nav-link" data-target="inicio"><div class="w-12 h-12 bg-accent rounded-full flex items-center justify-center text-primary font-bold text-lg border-2 border-yellow-500/50">GC</div><span class="text-2xl font-bold font-serif">GCMiRinconcito</span></a>
<div class="flex space-x-6">
<a id="whatsapp-footer" href="#" target="_blank" class="text-white hover:text-accent transition-colors duration-300"><i class="fab fa-whatsapp text-2xl"></i></a>
<a href="https://www.facebook.com/gcmirinconcito" target="_blank" class="text-white hover:text-accent transition-colors duration-300"><i class="fab fa-facebook text-2xl"></i></a>
<a href="https://www.instagram.com/gcmirinconcito/" target="_blank" class="text-white hover:text-accent transition-colors duration-300"><i class="fab fa-instagram text-2xl"></i></a>
<a href="mailto:gcmirinconcito@gmail.com" class="text-white hover:text-accent transition-colors duration-300"><i class="fas fa-envelope text-2xl"></i></a>
</div>
</div>
<div class="mt-8 text-center border-t border-gray-700 pt-6"><p class="text-gray-300">&copy; 2024 GCMiRinconcito. Todos los derechos reservados.</p><p class="text-gray-400 mt-2">Criando con amor y responsabilidad.</p></div>
</div>
</footer>

<div id="breed-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><div id="modal-body"></div></div></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
// General page navigation and UI elements
const navLinks = document.querySelectorAll('.nav-link');
const pages = document.querySelectorAll('.page-content');
const mobileMenuButton = document.getElementById('mobile-menu-button');
const mobileMenu = document.getElementById('mobile-menu');
const backToTopButton = document.getElementById('back-to-top');
const modal = document.getElementById('breed-modal');
const closeModal = document.querySelector('.close-modal');
const modalBody = document.getElementById('modal-body');
const accordionHeaders = document.querySelectorAll('.accordion-header');

// Chatbot UI elements
const chatBubble = document.getElementById('chat-bubble');
const chatWidget = document.getElementById('chat-widget');
const closeChat = document.getElementById('close-chat');
const chatMessages = document.getElementById('chat-messages');
const chatInputField = document.getElementById('chat-input-field');
const chatSendBtn = document.getElementById('chat-send-btn');
const agentNameEl = document.getElementById('agent-name');

// Chatbot state
const agentNames = ['Sofía', 'Carlos', 'Ana', 'Miguel', 'Laura'];
let currentAgentName = '';
let customerName = null;
let chatHistory = [];
let chatInitiated = false;
let conversationEnded = false;
let isWaitingForName = false;
let inactivityTimer = null;
let closeChatTimer = null;
let proactiveChatTimer = null;

const apiKey = ""; // API key will be injected at runtime
const synth = new Tone.Synth().toDestination();

function toggleChatWidget() {
chatWidget.classList.toggle('visible');
clearTimeout(proactiveChatTimer);
if (chatWidget.classList.contains('visible') && !chatInitiated) {
initiateChat();
}
}

function initiateChat() {
document.getElementById('connecting-loader')?.remove();
chatInitiated = true;
conversationEnded = false;
isWaitingForName = true;
customerName = null;
chatMessages.innerHTML = ''; // Limpiar mensajes
let availableAgents = agentNames.filter(name => name !== currentAgentName);
currentAgentName = availableAgents[Math.floor(Math.random() * availableAgents.length)];
agentNameEl.textContent = `Hablando con ${currentAgentName}`;

const namePrompt = `¡Hola! Soy ${currentAgentName}, tu agente comercial para esta sesión. Para darte una atención más personalizada, ¿con quién tengo el gusto?`;
addMessage(namePrompt, 'bot');
chatHistory = [{ role: 'model', parts: [{ text: namePrompt }] }];
setInactivityTimers();
}

function addMessage(text, sender, isLoading = false, playSound = true) {
const messageEl = document.createElement('div');
messageEl.classList.add('message', sender);
if (isLoading) {
messageEl.id = 'loading-indicator';
messageEl.innerHTML = `<div class="typing-indicator"><span></span><span></span><span></span></div>`;
} else {
messageEl.innerHTML = text; // innerHTML is used to render potential links
}
chatMessages.appendChild(messageEl);
chatMessages.scrollTop = chatMessages.scrollHeight;

if (sender === 'bot' && !isLoading && playSound) {
try {
Tone.start();
synth.triggerAttackRelease("G5", "16n");
if ('vibrate' in navigator) {
navigator.vibrate(100);
}
} catch (e) { console.log("Could not play sound or vibrate.", e); }
if (!chatWidget.classList.contains('visible')) {
chatBubble.classList.add('new-message');
setTimeout(() => chatBubble.classList.remove('new-message'), 820);
}
}
}

function showRatingSystem() {
conversationEnded = true;
clearInactivityTimers();
const ratingContainer = document.createElement('div');
ratingContainer.className = 'rating-container';
ratingContainer.innerHTML = `<h4>¿Cómo calificarías mi atención?</h4><div class="stars">${[1,2,3,4,5].map(r => `<span class="star" data-rating="${r}"><i class="fas fa-star"></i></span>`).join('')}</div><button class="feedback-btn">Enviar calificación</button>`;
chatMessages.appendChild(ratingContainer);

const stars = ratingContainer.querySelectorAll('.star');
stars.forEach(star => {
star.addEventListener('click', function() {
const rating = this.dataset.rating;
stars.forEach(s => s.classList.toggle('active', s.dataset.rating <= rating));
});
});

ratingContainer.querySelector('.feedback-btn').addEventListener('click', function() {
const activeStars = ratingContainer.querySelectorAll('.star.active').length;
if (activeStars > 0) {
const feedbackMessage = document.createElement('div');
feedbackMessage.className = 'feedback-message feedback-success';
feedbackMessage.textContent = `¡Gracias por tu calificación de ${activeStars} estrella${activeStars > 1 ? 's' : ''}!`;
chatMessages.appendChild(feedbackMessage);
ratingContainer.remove();
showReconnectOption();
chatMessages.scrollTop = chatMessages.scrollHeight;
}
});
chatMessages.scrollTop = chatMessages.scrollHeight;
}

function showReconnectOption() {
const reconnectContainer = document.createElement('div');
reconnectContainer.className = 'text-center p-4';
reconnectContainer.id = 'reconnect-container';
reconnectContainer.innerHTML = `<button id="reconnect-btn" class="reconnect-btn"><i class="fas fa-sync-alt mr-2"></i>Conectar con otro agente</button>`;
chatMessages.appendChild(reconnectContainer);
document.getElementById('reconnect-btn').addEventListener('click', () => {
document.getElementById('reconnect-container').remove();
const loader = document.createElement('div');
loader.id = 'connecting-loader';
loader.className = 'loader-container';
loader.innerHTML = `<div class="spinner"></div><p>Buscando un agente disponible...</p>`;
chatMessages.appendChild(loader);
chatMessages.scrollTop = chatMessages.scrollHeight;

const randomDelay = Math.random() * (50000) + 10000; // 10-60 seconds
setTimeout(() => {
chatInitiated = false;
initiateChat();
}, randomDelay);
});
chatMessages.scrollTop = chatMessages.scrollHeight;
}

function clearInactivityTimers() {
clearTimeout(inactivityTimer);
clearTimeout(closeChatTimer);
}

let usedInactivityMessages = new Set();
function getInactivityMessage() {
const inactivityMessages = [
"¿Sigues ahí? ¿Puedo ayudarte en algo más?",
"Hola de nuevo, solo quería saber si todavía necesitas ayuda.",
`¿Hay algo más en lo que pueda asistirte, ${customerName || ''}?`,
"Me quedé esperando tu respuesta, ¿necesitas más información?"
];
let availableMessages = inactivityMessages.filter(m => !usedInactivityMessages.has(m));
if (availableMessages.length === 0) {
usedInactivityMessages.clear();
availableMessages = inactivityMessages;
}
const message = availableMessages[Math.floor(Math.random() * availableMessages.length)];
usedInactivityMessages.add(message);
return message;
}

function setInactivityTimers() {
clearInactivityTimers();
if (conversationEnded) return;

inactivityTimer = setTimeout(() => {
addMessage(getInactivityMessage(), 'bot');
closeChatTimer = setTimeout(() => {
addMessage("Parece que no hay nadie. He cerrado esta sesión por inactividad. Si quieres continuar, puedes iniciar un nuevo chat.", 'bot');
conversationEnded = true;
showReconnectOption();
}, 60000); // 1 minuto
}, 30000); // 30 segundos
}

async function callGemini(systemPrompt, history) {
const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
const payload = { contents: history };
if (systemPrompt) {
payload.systemInstruction = { parts: [{ text: systemPrompt }] };
}
try {
const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
if (!response.ok) {
const errorBody = await response.text().catch(() => 'Could not read error body');
console.error("API Error Details:", { status: response.status, body: errorBody });
throw new Error(`API Error: ${response.status} ${response.statusText}`);
}
const result = await response.json();
if (!result.candidates || result.candidates.length === 0 || !result.candidates[0].content || !result.candidates[0].content.parts || result.candidates[0].content.parts.length === 0) {
console.error("Invalid API response structure:", result);
throw new Error("Invalid API response structure");
}
return result.candidates[0].content.parts[0].text;
} catch (error) {
console.error("Error in callGemini:", error);
throw error;
}
}

async function handleUserMessage() {
if (conversationEnded) return;
clearInactivityTimers();
const userText = chatInputField.value.trim();
if (!userText) return;

addMessage(userText, 'user');
chatInputField.value = '';

if (isWaitingForName) {
addMessage('', 'bot', true);
const nameValidationPrompt = `Analiza la siguiente respuesta a la pregunta "¿Con quién tengo el gusto?": "${userText}". Determina si es un nombre de persona plausible y respetuoso. Considera el "albur" y doble sentido del español de México. Responde únicamente con "VALID" si es un nombre apropiado, o "INVALID" si es una broma, albur, o claramente no es un nombre.`;

try {
const validationHistory = [...chatHistory, { role: 'user', parts: [{ text: userText }] }];
const validationResult = await callGemini(nameValidationPrompt, validationHistory);
document.getElementById('loading-indicator')?.remove();

if (validationResult && validationResult.trim().toUpperCase() === 'VALID') {
customerName = userText;
isWaitingForName = false;
const greetingWithName = `¡Mucho gusto, ${customerName}! Ahora sí, ¿en qué puedo ayudarte hoy en GCMiRinconcito?`;
addMessage(greetingWithName, 'bot');
chatHistory.push({ role: 'user', parts: [{ text: `Mi nombre es ${userText}` }] });
chatHistory.push({ role: 'model', parts: [{ text: greetingWithName }] });
setInactivityTimers();
} else {
const jokeGenerationPrompt = `Eres ${currentAgentName}, un agente de chat profesional y con chispa. Un cliente ha respondido "${userText}" cuando le preguntaste su nombre, lo cual es inapropiado o es una broma (albur). Genera una respuesta corta, firme pero educada, pidiendo una comunicación respetuosa para poder continuar y pidiendo de nuevo el nombre. Varía la respuesta para no ser repetitivo. Ejemplos: "Entiendo el buen humor, pero para poder ayudarte de la mejor manera, te pido que mantengamos una comunicación respetuosa. ¿Podrías indicarme tu nombre, por favor?", "Para poder ofrecerte un servicio profesional, necesito que nos comuniquemos de forma clara. ¿Me podrías decir tu nombre?", "Aprecio la creatividad, pero mantengamos la conversación en un tono profesional para que pueda asistirte mejor. ¿Cuál es tu nombre?".`;
const respectfulResponse = await callGemini(jokeGenerationPrompt, []);
addMessage(respectfulResponse, 'bot');
chatHistory.push({ role: 'model', parts: [{ text: respectfulResponse }] });
}
} catch(error) {
console.error("Error during name validation:", error);
document.getElementById('loading-indicator')?.remove();
addMessage('Hubo un problema verificando la información. Vamos a continuar. ¿En qué puedo ayudarte?', 'bot');
isWaitingForName = false; // Skip name validation if it fails
setInactivityTimers();
}
return;
}

addMessage('', 'bot', true);
chatHistory.push({ role: 'user', parts: [{ text: userText }] });

try {
const systemPrompt = `Eres ${currentAgentName}, un agente comercial experto que representa a "Granja Cunícola Mi Rinconcito". Tu misión es brindar atención al cliente personalizada, profesional y cordial. Siempre te diriges al cliente por su nombre (${customerName}), usando un tono amigable, conciso y confiable.
- Usa comillas ("") para resaltar palabras o ideas importantes.
- NO escribas párrafos largos. Mantén un estilo natural, breve y con frases claras.
- JAMÁS uses lenguaje negativo o dudoso.
- Muestra empatía y entusiasmo sin parecer forzado.
- Si confirmas que la duda principal fue resuelta, cierra con una pregunta amable como: "¿Puedo ayudarte en algo más, ${customerName}?" o "¿Hay algo más que te gustaría saber?".
- Si el cliente dice que no tiene más dudas o desea terminar (por ejemplo: "eso es todo", "gracias, ya no"), responde ÚNICAMENTE: "FINALIZAR_SESION".
- Tu conocimiento está ESTRICTAMENTE limitado a las razas (Nueva Zelanda, Californiano, Chinchilla, Mariposa, Belier Francés, Enano Holandés, Cabeza de León) y servicios (venta de alimento, heno, desparasitación, chequeo general). Siempre aclara que la disponibilidad puede variar por temporada. Si el cliente pregunta por algo fuera de este rango, responde de manera profesional: "No manejo esa información, pero puedo redirigirte al departamento de atención al cliente. ¿Te gustaría que te ponga en contacto con ellos?".
- Cuando debas listar razas o servicios, usa listas HTML para mayor claridad: <p>Manejamos varias razas, como:</p><ul><li><i class='fas fa-paw mr-2 text-accent'></i>Nueva Zelanda</li><li><i class='fas fa-paw mr-2 text-accent'></i>Californiano</li></ul>.
- Si detectas intención de compra (por ejemplo: "quiero comprar", "me interesa adquirir"), responde exactamente en el siguiente formato de dos líneas:
COMPRA_INTENT:[RESUMEN CONCISO DEL INTERÉS DEL CLIENTE]
¡Excelente decisión, ${customerName}! Para finalizar tu compra, por favor da clic en el siguiente botón:
- Si un cliente expresa enojo o pide hablar con un gerente (detecta 'queja', 'molesto', 'problema' o 'gerente'), responde ÚNICAMENTE: "INICIAR_QUEJA".`;

const botText = await callGemini(systemPrompt, chatHistory);
document.getElementById('loading-indicator')?.remove();

if (botText.startsWith('COMPRA_INTENT:')) {
const parts = botText.split('\n');
const summary = parts[0].replace('COMPRA_INTENT:', '').trim();
const handoffMessage = parts.slice(1).join('\n');
addMessage(handoffMessage, 'bot');
const whatsappLink = getWhatsAppLink(`¡Hola! Vengo del chat con ${currentAgentName}. Mi nombre es ${customerName}. Resumen: ${summary}`);
const handoffButton = document.createElement('div');
handoffButton.classList.add('message', 'bot');
handoffButton.innerHTML = `<a href="${whatsappLink}" target="_blank" class="whatsapp-handoff"><i class="fab fa-whatsapp mr-2"></i> Finalizar en WhatsApp</a>`;
chatMessages.appendChild(handoffButton);
setTimeout(() => { if (!conversationEnded) showRatingSystem(); }, 4000);
} else if (botText.trim() === 'FINALIZAR_SESION') {
addMessage(`Perfecto, ${customerName}. Ha sido un placer. Puedes calificar mi servicio a continuación.`, 'bot');
showRatingSystem();
} else if (botText.trim() === 'INICIAR_QUEJA') {
const complaintMessages = [
`Lamento mucho que tu experiencia no haya sido la ideal, ${customerName}. Tu opinión es muy importante. Por favor, completa el siguiente formulario para que un gerente revise tu caso.`,
`Entiendo tu frustración, ${customerName}. Permíteme ayudarte. Puedes registrar tu caso en el siguiente formulario para atención directa de gerencia.`
];
addMessage(complaintMessages[Math.floor(Math.random() * complaintMessages.length)], 'bot', false, false);
const formLink = document.createElement('div');
formLink.classList.add('message', 'bot');
formLink.innerHTML = `<a href="https://forms.gle/YYwdiPqcGQZUSMug7" target="_blank" class="complaint-link"><i class="fas fa-file-signature mr-2"></i> Abrir Formulario</a>`;
chatMessages.appendChild(formLink);
addMessage('Al finalizarlo, tu caso será escalado. ¿Hay algo más en lo que pueda asistirte mientras tanto?', 'bot');
setInactivityTimers();
} else {
addMessage(botText.replace(/"/g, '“').replace(/"/g, '”'), 'bot');
setInactivityTimers();
}
chatHistory.push({ role: 'model', parts: [{ text: botText }] });
} catch (error) {
console.error('Error con Gemini API:', error);
document.getElementById('loading-indicator')?.remove();
addMessage('Lo siento, tengo problemas de conexión. Por favor, intenta de nuevo más tarde.', 'bot');
setInactivityTimers();
}
}

chatBubble.addEventListener('click', toggleChatWidget);
closeChat.addEventListener('click', toggleChatWidget);
chatSendBtn.addEventListener('click', handleUserMessage);
chatInputField.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleUserMessage(); });
chatInputField.addEventListener('input', () => { clearInactivityTimers(); setInactivityTimers(); });

proactiveChatTimer = setTimeout(() => { if(!chatWidget.classList.contains('visible')) toggleChatWidget(); }, 12000);

// General page logic
const whatsappBanner = document.getElementById('whatsapp-banner');
const whatsappServices = document.getElementById('whatsapp-services');
const whatsappClub = document.getElementById('whatsapp-club');
const whatsappFooter = document.getElementById('whatsapp-footer');
function getWhatsAppLink(message = '') {
const phoneNumber = '529811579841';
return `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
}
whatsappBanner.href = getWhatsAppLink('Estoy interesado en sus mascotas premium.');
whatsappServices.href = getWhatsAppLink('Necesito asesoría sobre sus productos y servicios.');
whatsappClub.href = getWhatsAppLink('Quiero unirme al Club Premium de GCMiRinconcito.');
whatsappFooter.href = getWhatsAppLink();

function showPage(targetId) {
pages.forEach(page => page.classList.remove('active'));
const targetPage = document.getElementById(targetId);
if (targetPage) targetPage.classList.add('active');
navLinks.forEach(link => link.classList.toggle('active', link.dataset.target === targetId));
mobileMenu.classList.add('hidden');
window.scrollTo(0, 0);
setupScrollAnimations();
}

navLinks.forEach(link => link.addEventListener('click', e => { e.preventDefault(); showPage(e.currentTarget.dataset.target); }));
mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
window.addEventListener('scroll', () => backToTopButton.classList.toggle('visible', window.pageYOffset > 300));
backToTopButton.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

function createBreedCards() {
const gallery = document.querySelector('.breed-gallery');
if (!gallery) return;
const breeds = {
'nueva-zelanda': { title: 'Nueva Zelanda', images: ['https://placehold.co/800x500/1A2A4C/ffffff?text=Nueva+Zelanda+1', 'https://placehold.co/800x500/1A2A4C/ffffff?text=Nueva+Zelanda+2'], description: 'El conejo de Nueva Zelanda es una de las razas de conejos grandes...', characteristics: [{ name: 'Peso', value: '4 kg' }, { name: 'Longevidad', value: '8 - 12 años' }, { name: 'Tamaño', value: 'Grande' }] },
'californiano': { title: 'Californiano', images: ['https://placehold.co/800x500/1A2A4C/ffffff?text=Californiano+1', 'https://placehold.co/800x500/1A2A4C/ffffff?text=Californiano+2'], description: 'Raza con ascendencia de Nueva Zelanda y Chinchilla...', characteristics: [{ name: 'Peso', value: '3.5 kg' }, { name: 'Longevidad', value: '12 - 14 años' }, { name: 'Tamaño', value: 'Mediano' }] },
'chinchilla': { title: 'Chinchilla', images: ['https://placehold.co/800x500/1A2A4C/ffffff?text=Chinchilla+1', 'https://placehold.co/800x500/1A2A4C/ffffff?text=Chinchilla+2'], description: 'Pelaje denso y suave que cambia de tono con la edad...', characteristics: [{ name: 'Peso', value: '2.5-3 kg' }, { name: 'Longevidad', value: '10 - 12 años' }, { name: 'Tamaño', value: 'Mediano' }] },
'mariposa': { title: 'Mariposa', images: ['https://placehold.co/800x500/1A2A4C/ffffff?text=Mariposa+1', 'https://placehold.co/800x500/1A2A4C/ffffff?text=Mariposa+2'], description: 'Conocido por su bello pelaje moteado...', characteristics: [{ name: 'Peso', value: '2-3 kg' }, { name: 'Longevidad', value: '12 años' }, { name: 'Tamaño', value: 'Mediano' }] },
'belier-frances': { title: 'Belier Francés', images: ['https://placehold.co/800x500/1A2A4C/ffffff?text=Belier+Francés+1', 'https://placehold.co/800x500/1A2A4C/ffffff?text=Belier+Francés+2'], description: 'Caracterizado por su cabeza voluminosa y largas orejas caídas...', characteristics: [{ name: 'Peso', value: '4.5-5 kg' }, { name: 'Longevidad', value: '8 - 10 años' }, { name: 'Tamaño', value: 'Grande' }] },
'enano-holandes': { title: 'Enano Holandés', images: ['https://placehold.co/800x500/1A2A4C/ffffff?text=Enano+Holandés+1', 'https://placehold.co/800x500/1A2A4C/ffffff?text=Enano+Holandés+2'], description: 'La raza de conejo más pequeña del mundo...', characteristics: [{ name: 'Peso', value: '1 kg' }, { name: 'Longevidad', value: '10 - 12 años' }, { name: 'Tamaño', value: 'Pequeño' }] },
'cabeza-leon': { title: 'Cabeza de León', images: ['https://placehold.co/800x500/1A2A4C/ffffff?text=Cabeza+de+León+1', 'https://placehold.co/800x500/1A2A4C/ffffff?text=Cabeza+de+León+2'], description: 'Conejos pequeños clasificados toy con distintiva melena...', characteristics: [{ name: 'Peso', value: '1.3-1.7 kg' }, { name: 'Longevidad', value: '8 - 10 años' }, { name: 'Tamaño', value: 'Pequeño (Toy)' }] }
};
const categories = { 'nueva-zelanda': 'grandes', 'californiano': 'medianas', 'chinchilla': 'medianas', 'mariposa': 'medianas', 'belier-frances': 'grandes', 'enano-holandes': 'pequenas', 'cabeza-leon': 'pequenas' };
gallery.innerHTML = '';
Object.keys(breeds).forEach(key => {
const breed = breeds[key];
const category = categories[key];
const card = document.createElement('div');
card.className = 'breed-card bg-white rounded-xl shadow-lg overflow-hidden animate-on-scroll';
card.dataset.category = category;
card.dataset.breed = key;
card.innerHTML = `<div class="relative h-48 overflow-hidden"><img src="${breed.images[0]}" alt="${breed.title}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-110"><div class="absolute top-3 right-3 bg-accent text-primary text-xs font-bold px-2 py-1 rounded-full">${category.toUpperCase()}</div></div><div class="p-6"><h3 class="text-2xl font-bold mb-2 text-primary">${breed.title}</h3><p class="text-medium-text mb-4 truncate">${breed.description}</p><div class="flex justify-between items-center"><span class="text-accent font-semibold"><i class="fas fa-weight-hanging mr-1"></i> ${breed.characteristics[0].value}</span><button class="view-details text-primary hover:text-accent font-medium" data-breed="${key}">Ver detalles <i class="fas fa-arrow-right ml-1"></i></button></div></div>`;
gallery.appendChild(card);
});
// Attach event listener for details after cards are created
gallery.addEventListener('click', e => {
const targetButton = e.target.closest('.view-details, .breed-card');
if (targetButton) {
const breedId = targetButton.dataset.breed;
const breed = breeds[breedId];
if(breed) {
modalBody.innerHTML = `<div class="text-center mb-6"><h2 class="text-3xl font-bold text-primary font-serif">${breed.title}</h2></div><div class="mb-6"><div class="carousel-container"><div class="carousel-track">${breed.images.map(img => `<div class="carousel-slide" style="background-image: url('${img}')"></div>`).join('')}</div><button class="carousel-nav carousel-prev"><i class="fas fa-chevron-left"></i></button><button class="carousel-nav carousel-next"><i class="fas fa-chevron-right"></i></button></div><div class="carousel-indicators">${breed.images.map((_, i) => `<span class="indicator ${i === 0 ? 'active' : ''}" data-index="${i}"></span>`).join('')}</div></div><div class="mb-6"><p class="text-medium-text text-lg">${breed.description}</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4">${breed.characteristics.map(c => `<div class="bg-light p-4 rounded-lg"><h4 class="font-semibold text-primary">${c.name}</h4><p class="text-medium-text">${c.value}</p></div>`).join('')}</div><div class="mt-8 text-center"><a href="${getWhatsAppLink(`Estoy interesado en la raza ${breed.title}`)}" target="_blank" class="bg-accent text-primary font-bold py-3 px-8 rounded-full hover:bg-yellow-300 transition-all duration-300 transform hover:scale-105 inline-block"><i class="fab fa-whatsapp mr-2"></i>Consultar por esta raza</a></div>`;
modal.style.display = 'block';
initCarousel();
}
}
});
}
createBreedCards();

document.querySelectorAll('.filter-btn').forEach(btn => btn.addEventListener('click', function() {
document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
this.classList.add('active');
const filter = this.dataset.filter;
document.querySelectorAll('.breed-card').forEach(card => {
card.style.display = (filter === 'all' || card.dataset.category === filter) ? 'block' : 'none';
});
}));
const allFilterBtn = document.querySelector('[data-filter="all"]');
if(allFilterBtn) allFilterBtn.classList.add('active');

closeModal.addEventListener('click', () => modal.style.display = 'none');
window.addEventListener('click', e => { if (e.target === modal) modal.style.display = 'none'; });

function initCarousel() {
const track = document.querySelector('.carousel-track');
if(!track) return;
const slides = Array.from(track.children);
const nextBtn = document.querySelector('.carousel-next');
const prevBtn = document.querySelector('.carousel-prev');
const indicators = document.querySelectorAll('.indicator');
let currentIndex = 0;
const updateCarousel = () => {
track.style.transform = `translateX(-${currentIndex * 100}%)`;
indicators.forEach((ind, i) => ind.classList.toggle('active', i === currentIndex));
};
nextBtn.addEventListener('click', () => { currentIndex = (currentIndex + 1) % slides.length; updateCarousel(); });
prevBtn.addEventListener('click', () => { currentIndex = (currentIndex - 1 + slides.length) % slides.length; updateCarousel(); });
indicators.forEach((ind, i) => ind.addEventListener('click', () => { currentIndex = i; updateCarousel(); }));
}

accordionHeaders.forEach(header => header.addEventListener('click', function() {
const content = this.nextElementSibling;
const icon = this.querySelector('i');
content.classList.toggle('active');
icon.style.transform = content.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0)';
}));

function setupScrollAnimations() {
const observer = new IntersectionObserver(entries => {
entries.forEach(entry => {
if (entry.isIntersecting) entry.target.classList.add('is-visible');
});
}, { threshold: 0.1 });
document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));
}
setupScrollAnimations();
});
</script>
</body>
</html>

